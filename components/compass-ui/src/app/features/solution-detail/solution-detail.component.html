<div class="solution-detail-container" *ngIf="solution$ | async as solution">
  <div class="breadcrumb">
    <p-breadcrumb [model]="[
      { label: 'Home', routerLink: '/' },
      { label: 'Solution Catalog', routerLink: '/solutions' },
      { label: solution.name }
    ]"></p-breadcrumb>
  </div>

  <div class="solution-header">
    <div class="solution-logo">
      <img [src]="solution.logo || '/assets/default-solution-logo.svg'" [alt]="solution.name">
    </div>
    <div class="solution-info">
      <h1>{{ solution.name }}</h1>
      <div class="tags">
        <p-tag *ngFor="let tag of solution.tags" [value]="tag" severity="contrast"></p-tag>
      </div>
    </div>
  </div>

  <div class="solution-content">
    <div class="content-main">
      <p-tabView [(activeIndex)]="activeTab">
        <p-tabPanel header="Overview">
          <div class="overview-content">
            <div class="brief-section">
              <h3>Brief</h3>
              <p class="brief-text">{{ solution.brief }}</p>
            </div>

            <div class="description-section">
              <h3>Description</h3>
              <markdown [data]="solution.description"></markdown>
            </div>
          </div>
        </p-tabPanel>
      </p-tabView>
    </div>

    <div class="content-sidebar">
      <p-card>
        <div class="info-section">
          <div class="section-header">
            <h3>Basic Information</h3>
            <p-button 
              *ngIf="canEditSolution()" 
              icon="pi pi-pencil" 
              styleClass="p-button-text p-button-primary p-button-sm"
              (onClick)="navigateToEditSolution()"
              pTooltip="Edit Solution Information">
            </p-button>
          </div>
          <div class="info-item">
            <label>Category</label>
            <span>{{ solution.category }}</span>
          </div>
          <div class="info-item">
            <label>Stage</label>
            <p-tag [value]="solution.stage" [severity]="getStageSeverity(solution.stage)"></p-tag>
          </div>
          <div class="info-item">
            <label>Recommend Status</label>
            <p-tag [value]="solution.recommend_status" [severity]="getRecommendStatusSeverity(solution.recommend_status)"></p-tag>
          </div>
          <div class="info-item" *ngIf="solution.version">
            <label>Version</label>
            <span>{{ solution.version }}</span>
          </div>
        </div>

        <div class="info-section">
          <h3>Maintainer</h3>
          <div class="maintainer-avatar">
            <img [src]="environment.apiUrl + '/users/' + solution.maintainer_id + '/avatar'" [alt]="solution.maintainer_name">
          </div>
          <div class="info-item">
            <label>Name</label>
            <span>{{ solution.maintainer_name }} <span class="text-color-secondary">({{ solution.maintainer_id }})</span></span>
          </div>
          <div class="info-item">
            <label>Email</label>
            <a [href]="'mailto:' + solution.maintainer_email">{{ solution.maintainer_email }}</a>
          </div>
        </div>

        <div class="info-section">
          <h3>Links</h3>
          <div class="info-item" *ngIf="solution.official_website">
            <a [href]="solution.official_website" target="_blank">
              <i class="pi pi-external-link"></i> Official Website
            </a>
          </div>
          <div class="info-item" *ngIf="solution.documentation_url">
            <a [href]="solution.documentation_url" target="_blank">
              <i class="pi pi-file"></i> Documentation
            </a>
          </div>
          <div class="info-item" *ngIf="solution.demo_url">
            <a [href]="solution.demo_url" target="_blank">
              <i class="pi pi-play"></i> Demo
            </a>
          </div>
        </div>
      </p-card>
    </div>
  </div>
</div>

<div class="loading-state" *ngIf="loading">
  <p-progressSpinner></p-progressSpinner>
  <p>Loading details...</p>
</div>

<p-toast></p-toast>
